# 아이템43. 람다보다는 메서드 참조를 사용하라

람다가 익명 클래스보다 나은 점 중에서 가장 큰 특징은 간결함이다.   
자바에는 함수 객체를 람다보다도 더 간결하게 만드는 방법이 있다.   
바로 **메서드 참조(method reference)** 다.

다음 코드는 임의의 키와 Integer 값의 매핑을 관리하는 프로그램의 일부다.

```java
public class MethodReferenceEx {
    public static void main(String[] args) {
        Map<Integer, Integer> map = new HashMap<>();
        Integer key = 1;
        // 람다식 예제
        map.merge(key, 1, (count, incr) -> count + incr);

        // 메서드 레퍼런스 예제
        map.merge(key, 1, Integer::sum);
    }
}
```

Map의 merge 메서드 세번째 매개변수는 함수형 인터페이스를 받으며 람다식으로 표현할 수 있다.

메서드 레퍼런스를 사용한 예제를 보면 람다식보다 훨씬 간결하다.

매개변수 수가 늘어날수록 메서드 참조로 제거할 수 있는 코드양도 늘어난다.

### 항상 메서드 참조가 좋은가?

하지만 어떤 람다에서는 매개변수의 이름 자체가 프로그래머에게 좋은 가이드가 되기도 한다.   
이런 람다는 메서드 참조보다 읽기 쉽고 유지보수도 쉬울 수 있다.

람다로 할 수 없는 일이라면 메서드 참조로도 할 수 없다. (애매한 예외가 있긴하다.)

메서드 참조를 사용하는 편이 보통은 더 짧고 간결하므로, 람다로 구현했을 때 너무 길거나 복잡하다면 메서드 참조가 좋은 대안이 되어준다.   
즉, 람다로 작성할 코드를 새로운 메서드에 담은 다음, 람다 대신 그 메서드 참조를 사용하는 식이다.   
메서드 참조에는 기능을 잘 드러내는 이름을 지어줄 수 있고 친절한 설명을 문서로 남길 수 있다.

IDE는 대부분 람다를 메서드 참조로 대체하라고 권하지만 그것이 항상 옳은것은 아니다. 아래의 예시를 보자.

람다가 메서드 참조보다 간결할 때가 있다. 주로 메서드와 람다가 같은 클래스에 있을 때 그렇다.

```java
service.execute(GoshThisClassNameIsHumongous::action);

service.execute(() -> action());
```

메서드 참조 쪽은 더 짧지도, 더 명확하지도 않다. 람다 쪽이 낫다.

### 메서드 참조 유형 다섯 가지

메서드 참조의 가장 흔한 유형은 앞의 예시에서 본 것 처럼 정적 메서드를 가리키는 메서드 참조다.

나머지 유형 네 가지도 살펴보자.

* 먼저 인스턴스 메서드를 참조하는 유형 두 가지
  * 수신 객체를 특정하는 **한정적 인스턴스 메서드 참조** - 정적 참조와 비슷
  * 수신 객체를 특정하지 않는 **비한정적 인스턴스 메서드 참조**
  * 클래스 생성자를 가리키는 메서드 참조
  * 배열 생성자를 가리키는 메서드 참조

```java
// 정적 메서드 참조 유형
메서드 참조 : Integer::parseInt
람다식 : str -> Integer.parseInt(str);

// 한정적 인스턴스 메서드 참조
메서드 참조 : Instant.now()::isAfter
람다식 : Instant then = Instant.now(); t -> then.isAfter(t)

// 비한정적(인스턴스)
메서드 참조 : String::toLowerCase
람다식 : str -> str.toLowerCase()

// 클래스 생성자
메서드 참조 : TreeMap<K,V>::new
람다식 : () -> new TreeMap<K,V>()

// 배열 생성자
메서드 참조 : int[]::new
람다식 : len -> new int[len]
```

